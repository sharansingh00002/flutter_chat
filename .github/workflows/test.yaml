#name: UAT build generation for release branch
#
#on:
#  push:
#    branches: [ master ]
#
#jobs:
#  build_release_apk:
#    name: Build android prod build
#    runs-on: ubuntu-latest
#    env:
#      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
#    steps:
#      - uses: actions/checkout@v3
#      - uses: actions/setup-java@v3
#        with:
#          distribution: 'zulu'
#          java-version: '12.x'
#          cache: 'gradle'
#      - uses: subosito/flutter-action@v2
#        with:
#          flutter-version: '3.3.0'
#          channel: 'stable'
#          cache: true
#      - run: flutter pub get
#      - name: Download Android keystore
#        id: android_keystore
#        uses: timheuer/base64-to-file@v1.0.3
#        with:
#          fileName: key.jks
#          encodedString: ${{ secrets.ANDROID_KEYSTORE_BASE64 }}
#
#      - name: Create key.properties
#        run: |
#          echo "storeFile=${{ steps.android_keystore.outputs.filePath }}" > android/key.properties
#          echo "storePassword=${{ secrets.ANDROID_KEYSTORE_PASSWORD }}" >> android/key.properties
#          echo "keyPassword=${{ secrets.ANDROID_KEY_PASSWORD }}" >> android/key.properties
#          echo "keyAlias=${{ secrets.ANDROID_KEY_ALIAS }}" >> android/key.properties
#      - name: Build Android App Bundle
#        run: flutter build appbundle
#      - name: Setup Ruby
#        uses: actions/setup-ruby@v1
#        with:
#          ruby-version: '2.6'
#
#      - name: Cache bundle dependencies
#        uses: actions/cache@v2
#        with:
#          path: vendor/bundle
#          key: ${{ runner.os }}-gems-${{ hashFiles('**/Gemfile.lock') }}
#          restore-keys: ${{ runner.os }}-gems-
#
#      - name: Download bundle dependencies
#        run: |
#          gem install bundler:2.0.2
#          bundle config path vendor/bundle
#          bundle install
#      - name: Release to Google Play (beta)
#        env:
#          SUPPLY_PACKAGE_NAME: ${{ secrets.ANDROID_PACKAGE_NAME }}
#          SUPPLY_JSON_KEY_DATA: ${{ secrets.GOOGLE_SERVICE_ACCOUNT_KEY }}
#        run: |
#          bundle exec fastlane supply \
#          --aab build/app/outputs/bundle/release/app-release.aab \
#          --track beta
#
#      - name: Slack Notification
#        uses: act10ns/slack@v1
#        with:
#          status: ${{ job.status }}
#          channel: '#incomingwwebhook'
#          message: New build has been deployed
#        if: always()